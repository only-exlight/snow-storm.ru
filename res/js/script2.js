window.onload = function() {
    var doc = document,
        slider = doc.getElementById('slider'),
        slRadio = doc.querySelectorAll('.sl-nav'),
        tringleL = doc.getElementById('tringle-l'),
        navBlock = doc.getElementsByClassName('sl-navigation')[0],
        slRadioForm = doc.getElementById('slRadioBut'),
        tringleR = doc.getElementById('tringle-r');

    var slideTittle = doc.getElementById('slide-title'),
        slideDiscription = doc.getElementById('slide-discription'),
        url = doc.getElementById('url'),
        loading = doc.getElementById('loading');

    var curItem = 0,
        content = [],
        roundNavItems = [],
        timer;
    
    /*Автопереключение слайдера
    ===========================*/
    function autoSwith() {
        timer = setInterval(function () {
            curItem++;
            if (curItem >= content.length) curItem = 0;
            SliderContent();
        }, 8000);
    };

    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/include/slider-info.php', true);
    xhr.send();
    xhr.onload = function (e) {
        content = JSON.parse(e.target.responseText);

        for (var i = 0; i < content.length; i++) {
            roundNavItems[i] = doc.createElement('div');
            roundNavItems[i].className = 'round';
            roundNavItems[i].id = i;
            roundNavItems[i].onclick = function(event) {
                curItem = event.target.id;
                clearTimeout(timer);
                SliderContent();
                autoSwith();
            }
            navBlock.insertBefore(roundNavItems[i], tringleR);
        }
        loading.className = 'hide';
        url.className = '';
        SliderContent();
        autoSwith();
    }
    
    /*Треугольники
    ==============*/
    tringleL.onclick = function () {
        curItem--;
        if (curItem < 0) curItem = content.length - 1;
        clearTimeout(timer);
        SliderContent();
        autoSwith();
    }
    tringleR.onclick = function () {
        curItem++;
        if (curItem >= content.length) curItem = 0;
        clearTimeout(timer);
        SliderContent();
        autoSwith();
    }

    /*Контент слайдера*/
    function SliderContent() {
        roundNavItems.forEach(function (item, index) {
            if (curItem == index) {
                slider.style.background = content[curItem].imglink;
                slideTittle.innerText = content[curItem].title;
                slideDiscription.innerText = content[curItem].discription;
                url.href = content[curItem].link;

                slider.style.backgroundSize = 'cover';
                item.className = 'round round-active';
            } else {
                item.className = 'round';
            }
        })
    }
}
    /*
    ===■■■■■■■■■■■==■■■========■■■=======■■■■■■=======■■■■■■■■■■■==■■■■■■■■■■■=====■■■■■■■■■■■■■■■===■■■■====■■■■■■■■■■■■==■■■========■■■
    ===■■■■■■■■■■■===■■■======■■■=======■■■■■■■■■=====■■■■■■■■■■■==■■■■■■■■■■■■====■■■■■■■■■■■■■■■==■■■■■■===■■■■■■■■■■■■==■■■■=======■■■
    ===■■■======■■====■■■====■■■======■■■=====■■■■====■■■======■■==■■■=======■■■===■■====■■■====■■==■■■■■■===■■■======■■■==■■■=■■=====■■■
    ===■■■===■■========■■■==■■■======■■■=======■■■■===■■■===■■=====■■■========■■■========■■■=========■■■■====■■■======■■■==■■■==■■====■■■
    ===■■■■■■■■=========■■■■■■======■■■■==============■■■■■■■■=====■■■=======■■■=========■■■=========■■■■====■■■======■■■==■■■===■■===■■■
    ===■■■■■■■■=========■■■■■■======■■■■==============■■■■■■■■=====■■■■■■■■■■■■■=========■■■=========■■■■====■■■======■■■==■■■====■■==■■■
    ===■■■===■■========■■■==■■■======■■■========■■■■==■■■===■■=====■■■■■■■■■■■■==========■■■=========■■■■====■■■======■■■==■■■=====■■=■■■
    ===■■■======■■====■■■====■■■=======■■■=====■■■■===■■■======■■==■■■===================■■■=========■■■■====■■■======■■■==■■■======■■■■■
    ===■■■■■■■■■■■===■■■=====■■■■=======■■■■■■■■■■====■■■■■■■■■■■==■■■===================■■■=========■■■■====■■■■■■■■■■■■==■■■=======■■■■
    ===■■■■■■■■■■■==■■■■======■■■■========■■■■■■======■■■■■■■■■■■==■■■=================■■■■■■■=======■■■■====■■■■■■■■■■■■==■■■========■■■
    vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv■■■■vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv■■■■мvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    ===■■■■■■===■■■■■■■==■■==■■■■■■■=======■■=====■■■■■■===■■■■■■■==■■==■■■■■■=======================■■■■================================
    ==■■■==■■■==■■■■■■■==■■==■■===========■■=====■■■==■■■==■■■■■■■==■■==■■==■■=======================■■■■================================
    ======■■■===■■===■■==■■==■■■■■■■=====■■==========■■■===■■===■■==■■=====■■========================■■■■================================
    =====■■■====■■===■■==■■==■■===■■====■■==========■■■====■■===■■==■■====■■======================■■■■■■■================================
    ===■■■======■■■■■■■==■■==■■===■■===■■=========■■■======■■■■■■■==■■===■■====================■■■■■=====================================
    ==■■■■■■■■==■■■■■■■==■■==■■■■■■■==■■=========■■■■■■■■==■■■■■■■==■■==■■====================■■■■■======================================
    ==========================================================================================■■■■=======================================
    ===========================================================================================■■■■======================================
    ============================================================================================■■■■■====================================
    ====================■■■====================================================================■■■■■=====================================
    ===================■■■■■=========■■■======================================================■■■■■======================================
    ==================■■■■■■■=======■■■■■====================================================■■■■■=======================================
    ===============================■■■■■■■=================================================■■■■■=========================================
    =======================================================================================■■■■■=========================================
    ========================================================================================■■■■■========================================
    =========================================================================================■■■■■=======================================
    ==========================================================================================■■■■■■=====================================      
    ============================================================================================■■■■■■===================================    
    Thanks you 2016 year =)  02.12.2017
    */